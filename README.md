# Домашняя работа №4

## Задания:
- Создайте индексы для таблиц Courses, Students, Course_Student в LMS, чтобы ускорить выполнение часто используемых запросов.
- Включите логирование медленных запросов в вашей базе данных LMS. Выполните несколько сложных запросов и проанализируйте, какие из них требуют оптимизации.
- Проведите оптимизацию сложных запросов с использованием индексов. Проверьте, как улучшилась производительность.
## Решение:
Для выполнения домашних заданий по курсу БД была установлена СУБД PostgreSQL. Также для дальнейшего взаимодействия с базой данных было установлено приложение для взаимодействия с Базой данных - PGAdmin.

Установка и настройка PostgreSQL и PGAdmin происходит через Docker.

Для запуска системы необходимо ввести команду:

    docker-compose up -d

Создание индексов приведено в файле [indexes.sql](scripts%2Findexes.sql)
Для таблиц созданы индексы users и courses созданы индексы, для таблицы course_students создание индексов не требуются, т.к. колонки уже имеют индекс 

#### Примеры выполнения запросов с индексом и без

До индексации:
![before.jpg](pictures%2Fbefore.jpg)

После индексации:
![after.jpg](pictures%2Fafter.jpg)

#### Включено логирование и проведен анализ выполнения сложных запросов:

##### До оптимизации: 
```postgresql
    duration: 5676.012 ms  execute <unnamed>: SELECT * FROM users WHERE name LIKE 'ffff%' GROUP BY users.name,user_id ORDER BY name
```

Оптимизация запроса приведена в файле [update_diff_query.sql](scripts%2Fupdate_diff_query.sql)

##### После оптимизации:
```postgresql
    duration: 1989.243 ms  execute <unnamed>: SELECT * FROM users WHERE name LIKE 'ffff%' GROUP BY users.name,user_id ORDER BY name
```

##### Итог
Запрос получилось ускорить в **3 раза**